<div class="create_campaign_page"><section class="content"><div class="row"><div class="col-sm-offset-1 col-sm-10 col-lg-offset-2 col-lg-8"><h3 class="page_title">发活动</h3><div class="box box-warning"><div class="box-body"><form name="createCampaignForm" class="create_cp_form"><div class="cp_tabs"><div ng-click="selectType('company')" ng-class="{'active': campaignType === 'company'}" class="cp_tab">公司活动</div><div class="cp_tab_divider"></div><div ng-click="selectType('team')" ng-class="{'active': campaignType === 'team'}" class="cp_tab">小队活动</div></div><div ng-if="campaignType === 'team'" class="form-group"><label class="cp_form_label">选择小队</label><div class="form-control cp_team_list clearfix"><div ng-repeat="team in teamList" ng-click="toggleSelectTeam(team)" ng-class="{'selected': team.selected}" class="cp_team"><i ng-class="{'fa-square-o': !team.selected, 'fa-check-square-o': team.selected}" class="fa fa-fw"></i><span ng-bind="team.name" class="cp_team_name"></span></div></div></div><div class="form-group"><label class="cp_form_label">活动名称</label><input type="text" name="theme" placeholder="请填写活动名称" ng-model="formData.theme" maxlength="20" required="required" class="form-control"/></div><div class="form-group"><label class="cp_form_label">活动类型</label><input name="campaignMold" nng-model="formData.campaign_mold" required="required" class="form-control"/></div><div class="form-group time_group"><label class="cp_form_label">开始时间</label><div id="start_time" class="input-group date"><input type="text" ng-model="formData.start_time" name="endTime" placeholder="请选择活动开始时间" data-date-format="YYYY-MM-DD HH:mm" readonly="readonly" required="required" class="form-control"/><div class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></div></div></div><div class="form-group time_group"><label class="cp_form_label">结束时间</label><div id="end_time" class="input-group date form_datetime"><input type="text" ng-model="formData.end_time" name="endTime" placeholder="请选择活动结束时间" data-date-format="YYYY-MM-DD HH:mm" readonly="readonly" required="required" class="form-control"/><div class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></div></div></div><div class="form-group"><label class="cp_form_label">地点</label><div class="input-group"><input type="text" name="location" ng-model="formData.location.name" placeholder="请填写活动地点" required="required" class="form-control"/><div title="设置地图标记" ng-click="search()" class="input-group-addon"><span class="glyphicon glyphicon-map-marker"></span></div></div></div><div ng-show="hasSearch" class="form-group"><map-search ctrl="mapCtrl"></map-search></div><div class="form-group"><label class="cp_form_label">简介</label><div class="pen_editor"><div id="create_cp_page_pen_toolbar"></div><div id="create_cp_page_pen_content" name="content" ng-model="formData.content" contenteditable="true" mix-maxlength="4000" required="required" class="form-control"></div></div></div><div ng-show="campaignType === 'company' ? moreDetail.company :  moreDetail.team" class="form-group time_group"><label class="cp_form_label">报名截止时间</label><div id="deadline" class="input-group date form_datetime"><input type="text" ng-model="formData.deadline" name="deadline" placeholder="请选择报名截止时间" data-date-format="YYYY-MM-DD HH:mm" readonly="readonly" class="form-control"/><div class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></div></div></div><div ng-show="campaignType === 'company' ? moreDetail.company :  moreDetail.team" class="form-group"><label class="cp_form_label">报名人数上限</label><input type="number" name="memberMax" ng-model="formData.member_max" class="form-control"/></div><div ng-show="campaignType === 'company' ? moreDetail.company :  moreDetail.team" class="form-group"><label class="cp_form_label">最少人数</label><input type="number" name="memberMin" ng-model="formData.member_min" class="form-control"/></div><div class="form-group more_detail"><a href="" ng-click="toggleMoreDetail()" ng-bind="campaignType === 'company' ? (moreDetail.company ? '收起' : '更多') : (moreDetail.team ? '收起' : '更多')"></a></div><div class="form-group clearfix"><button ng-class="{'btn-primary': createCampaignForm.$valid, 'btn-default': createCampaignForm.$invalid}" ng-disabled="createCampaignForm.$invalid || sending" ng-click="publish()" class="btn pull-right"><span ng-if="!sending">发布</span><i ng-if="sending" class="fa fa-spinner fa-pulse"></i></button></div></form></div></div></div></div></section></div>