<div class="team_list_page"><section class="content-header"><h1>小队管理<small ng-bind-template="{{teams.length}}个小队"></small></h1></section><section class="content"><div class="row operate_row"><div class="col-md-2 col-sm-4 col-xs-12 text-center"><a ui-sref="manager.createTeam" class="btn btn-primary">新建小队</a></div><div ng-if="noLeaderTeams.length&gt;0" class="col-md-10 col-sm-8 col-xs-12"><div class="row"><div ng-repeat="team in noLeaderTeams" class="col-md-3 col-sm-6 col-xs-12 team"><p>{{team.name}},还没有队长</p><a ui-sref="manager.pointTeamLeader({teamId:team._id})" class="btn btn-primary">任命队长</a></div></div></div></div><div class="row"><div class="col-xs-12"><div ng-show="leaderTeams.length" class="box box-primary"><div class="box-header"><h3 class="box-title">有队长的小队</h3></div><div class="box-body no-padding"><table datatable="ng" dt-options="dtOptions" dt-column-defs="dtColumnDefs" class="table table-striped"><thead><tr><th>名称</th><th>队长</th><th>人数</th><th>上月活动数</th><th>总活动数</th><th>积分</th><th>活跃度</th><th>详情</th><th>编辑</th><th>任命</th></tr></thead><tbody><tr ng-repeat="team in leaderTeams"><td>{{team.name}}</td><td>{{team.leaders[0].nickname}}</td><td>{{team.memberCount}}</td><td>{{team.count.last_month_campaign}}</td><td>{{team.count.total_campaign}}</td><td>{{team.score_rank.score}}</td><td>{{team.score.total}}</td><td><button ng-click="detail('leaderTeams', $index)" class="btn btn-xs btn-link">详情</button></td><td><a ui-sref="manager.editTeam({teamId:team._id})">编辑</a></td><td><a ui-sref="manager.pointTeamLeader({teamId:team._id})">任命队长</a></td></tr></tbody></table></div></div></div></div><div class="row"><div class="col-xs-12"><div ng-show="closedTeams.length" class="box box-primary"><div class="box-header"><h3 class="box-title">被关闭的小队</h3></div><div class="box-body no-padding"><table datatable="ng" dt-options="Options" dt-column-defs="ColumnDefs" class="table table-striped"><thead><tr><th>名称</th><th>队长</th><th>人数</th><th>上月活动数</th><th>总活动数</th><th>积分</th><th>活跃度</th><th>详情</th><th>编辑</th></tr></thead><tbody><tr ng-repeat="team in closedTeams"><td>{{team.name}}</td><td>{{team.leaders[0].nickname}}</td><td>{{team.memberCount}}</td><td>{{team.count.last_month_campaign}}</td><td>{{team.count.total_campaign}}</td><td>{{team.score_rank.score}}</td><td>{{team.score.total}}</td><td><button ng-click="detail('leaderTeams', $index)" class="btn btn-xs btn-link">详情</button></td><td><a ui-sref="manager.editTeam({teamId:team._id})">编辑</a></td></tr></tbody></table></div></div></div></div></section></div><script type="text/ng-template" id="teamDetailModal.html"><div class="modal-header"><button type="button" data-dismiss="modal" aria-label="Close" ng-click="cancel()" class="close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">小队详情</h4></div><div class="modal-body"><div ng-cloak="ng-cloak" class="team_detail_modal"><div class="row"><div class="col-md-2">队名</div><div class="col-md-10">{{team.name}}</div></div><div class="row"><div class="col-md-2">公司名</div><div class="col-md-10">{{team.cname}}</div></div><div class="row"><div class="col-md-2">类型</div><div class="col-md-10">{{team.groupType}}</div></div><div class="row"><div class="col-md-2">主场一</div><div class="col-md-10">{{team.homeCourts.length>0?team.homeCourts[0].name :'暂无'}}</div></div><div class="row"><div class="col-md-2">主场二</div><div class="col-md-10">{{team.homeCourts.length>1?team.homeCourts[1].name :'暂无'}}</div></div><div class="row"><div class="col-md-2">活跃度</div><div class="col-md-10">{{team.score.total}}</div></div><div class="row"><div class="col-md-2">积分</div><div class="col-md-10">{{team.score_rank.score}}</div></div><div class="row"><div class="col-md-2">队长</div><div ng-repeat="leader in team.leaders" class="col-md-2 user"><img ng-src="{{leader.photo}}/40/40" class="user_logo"/><div class="user_name">{{leader.nickname}}</div></div></div><div class="row"><div class="col-md-2">成员</div><div ng-repeat="member in team.members" class="col-md-2 user"><img ng-src="{{member.photo}}/40/40" class="user_logo"/><div class="user_name">{{member.nickname}}</div></div></div><div class="row"><div class="col-md-2">近期活动</div><div class="col-md-10">{{team.lastCampaign?team.lastCampaign.theme :'无'}}</div></div></div></div><div class="modal-footer"><button ng-click="cancel()" class="btn btn-primary">确定</button></div></script>