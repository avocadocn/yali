<div class="inner department_page"><h4>部门管理</h4><hr/><div class="dl_department"><div class="tree company_tree"><ul><li ng-include="'node.html'" ng-class="hasChild(node)"></li></ul></div></div><div id="managerAppointModel" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" class="modal fade"><div class="modal-dialog"></div><div class="dl-modal"><div class="dl-modal-header"><button type="button" data-dismiss="modal" aria-hidden="true" class="head close">&times</button><div id="myModalLabel" class="head">任命部门管理员</div></div><div class="dl-modal-body clearfix"><div class="dl_modal_container"><div class="dl_row clearfix"><span class="info_label">点选新成员任命管理员后,现任管理员自动解职</span><a ng-click="showOriginalUser()" ng-if="search_flag" ng-cloak="ng-cloak">显示部门成员</a><div class="search_form pull-right"><form name="manager_form" novalidate="novalidate"><div class="search_input"><input placeholder="搜索成员" type="text" ng-model="member_search_department" required="required"/></div><div type="submit" ng-click="search()" ng-disabled="manager_form.$invalid" class="search_icon"></div></form></div></div></div><div class="dl_modal_container"><div bs-popover="bs-popover" class="groups"><p ng-if="message" ng-cloak="ng-cloak">{{message}}</p><div ng-repeat="user in department_users" class="group"><div class="dl_row"><a ng-if="user.leader" ng-click="appointReady($index)" ng-disabled="true"><img ng-src="{{user.photo}}" ng-Mouseenter="showUserCard(user._id,user._id)" id="pop{{user._id}}" class="img_user dl_cover"/></a><a ng-if="!user.leader" ng-click="appointReady($index)" ng-disabled="true"><img ng-src="{{user.photo}}" ng-Mouseenter="showUserCard(user._id,user._id)" id="pop{{user._id}}" class="member img_user"/></a></div><div class="dl_row users"><span class="user_name">{{user.nickname}}</span></div></div></div></div></div><div class="dl-modal-footer"><button data-dismiss="modal" class="cancel_btn dl_btn_large">取消</button><button data-dismiss="modal" ng-click="appointManager()" class="dl_btn dl_btn_large">任命</button></div></div></div></div><script type="text/ng-template" id="node.html"><div class="self inline dropdown"><span data-toggle="dropdown"><i ng-class="node.toggle ? node.toggle : 'glyphicon-minus'" ng-if="node.department &amp;&amp; node.department.length &gt; 0" ng-click="toggleTree(node, $event)" class="glyphicon"></i><div ng-if="!node.is_editing" class="inline">&nbsp;{{node.name}}</div><div ng-if="node.manager &amp;&amp; node.manager.length&gt;0 &amp;&amp; !node.is_editing" class="inline manager_list">管理员:&nbsp;<a ng-repeat="manager in node.manager" ng-href="/users/home/{{manager._id}}" class="manager"><img tooltip-placement="bottom" tooltip-append-to-body="true" tooltip="{{manager.nickname}}" ng-src="{{manager.photo}}" class="manager_photo"/></a></div><div ng-if="node.is_creating" class="inline"><input type="text" ng-model="node.edit_name"/><button ng-click="confirmCreate(node)" class="dl_btn dl_btn_small">确定</button><button ng-click="cancelCreate(node)" class="cancel_btn dl_btn_small">取消</button></div><div ng-if="node.is_editing" class="inline"><input type="text" ng-model="node.temp_name"/><button ng-click="confirmEdit(node)" class="dl_btn dl_btn_small">确定</button><button ng-click="cancelEdit(node)" class="cancel_btn dl_btn_small">取消</button></div></span><ul ng-show="!node.is_creating &amp;&amp; !node.is_editing" role="menu" class="dropdown-menu"><li role="presentation" ng-if="!node.is_company"><a role="menu-item" tabindex="-1" href="/department/home/{{ node._id }}">进入部门主页</a></li><li role="presentation" ng-if="!node.is_company"><a role="menu-item" tabindex="-1" href="javascript:void(0)" ng-click="getNode(node)">任命管理员</a></li><li role="presentation"><a role="menu-item" tabindex="-1" href="javascript:void(0)" ng-click="addNode(node)" ng-if="node.level &lt; 3">创建子部门</a></li><li role="presentation" ng-if="!node.is_company"><a role="menu-item" tabindex="-1" href="javascript:void(0)" ng-click="editNode(node)">修改部门名字</a></li><li role="presentation" ng-if="!node.is_company"><a role="menu-item" tabindex="-1" href="javascript:void(0)" ng-click="deleteNode(node)">删除该部门</a></li></ul></div><ul ng-if="!node.hideChild"><li ng-repeat="node in node.department" ng-include="'node.html'" ng-class="hasChild(node)"></li></ul></script>