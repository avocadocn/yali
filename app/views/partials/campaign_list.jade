.loading_div(ng-show = 'loading')
.dl_campaign_list(ng-show = '!loading')
  if provider=='company'
    .dl_row
      .btn-group.pull-right
        button.dl_btn.dl_btn_small.dropdown-toggle(data-toggle="dropdown") {{campaign_type}}
        ul.dropdown-menu(role="menu")
          li
            a(ng-click="selectCampaign(0)") #{__("COMPANY_CAMPAIGN")}
          li(ng-if="role==='EMPLOYEE'")
            a(ng-click="selectCampaign(1)") #{__("SELECTED_TEAM")}
          li(ng-if="role==='EMPLOYEE'")
            a(ng-click="selectCampaign(2)") #{__("UNSELECTED_TEAM")}
          li(ng-if="role!=='EMPLOYEE'")
            a(ng-click="selectCampaign(3)") 小队活动
          li
            a(ng-click="selectCampaign(4)") 部门活动
          li
            a(ng-click="selectCampaign(5)") 所有活动
  table.table.table-hover.campaign_table
    tr(ng-repeat="campaign_item in campaigns")
      //- td.emp_col
      //-   p
      td.year_col
        p(ng-if="judgeYear($index)").year {{campaign_item.start_time  | date:'yyyy'}}
      td.time_col
        p.text-center.day {{ campaign_item.start_time  | day }}
        p.text-center.time {{ campaign_item.start_time | date:'HH:mm' }}
      td(class="#{provider}_logo_col")
        a(ng-href="{{campaign_item.link}}")
          img.campaign_logo(ng-if="campaign_item.type==='teamcampaign'" ng-src="{{campaign_item.logo}}/64/64")
          img.campaign_logo(ng-if="campaign_item.type!=='teamcampaign'" ng-src="{{campaign_item.logo}}/64/64")
      td.content_col
        a(ng-href="/{{(campaign_item.type=='provoke'?'competition/':'campaign/detail/')+campaign_item._id}}")
          p
            strong 主题:
            span.theme_text {{campaign_item.theme}}
          //- p
          //-   strong 内容:
          //-   span.content_text {{campaign_item.content}}
          p
            strong #{__("LOCATION")}:
            span.content_text {{campaign_item.location.name}}
      td.operator_col(ng-class="{'joined':campaign_item.join_flag===1}")
        button.dl_btn.cancel_btn.dl_btn_small.pull-right(ng-if="campaign_item.close_flag" ng-click="cancel(campaign_item._id)") 关闭活动
        if provider=='user'
          button.dl_btn.dl_btn_small.pull-right(ng-if="campaign_item.join_flag === -1 || campaign_item.join_flag ===0 " ng-click="join(campaign_item._id,$index,campaign_item.team_id)") 我要报名
  .text-center(ng-if="campaigns.length>0")
    button.btn.dl_btn(ng-if="loadMore_flag" ng-click="loadMore()") 加载更多
    span(ng-if="loadOver_flag") 已经加载了所有的活动
  .text-center(ng-if="campaigns.length==0")
    span.loademp 目前没有新的活动
  ul.pager(ng-if="nextPage_flag")
    li
      a(ng-if="lastPage_flag" ng-click="changePage(-1)") 上一页
    li
      a(ng-if="nextPage_flag" ng-click="changePage(1)") 下一页
.modal.fade#joinTeamSelectmodal(tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true")
  include ../campaign/select_team_for_multi_campaign