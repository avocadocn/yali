extends ../layouts/manager

block baseInfo
  .row
    .col-md-3
      img.img-responsive.img-thumbnail.size_210.img_contain(src="#{logo}")
    .col-md-9
      .row
        h3= tname
      .row
        label.info_label= cname
      .row.margin_top_15
        label.info_label= sign
      .row.margin_top_15
        .col-md-2
          label.info_border 队员
          label.info_border= number + '人'
        .col-md-2
          label.info_border  积分
          label.info_border= score
        .col-md-2
          label.info_border  胜率
          label.info_border  100%
        if(role ==='HR' || role ==='LEADER')
          .col-md-4.col-md-offset-2
            button(class="dl_btn" data-toggle="modal" data-target="#sponsorCampaignModel") 活动
            button(class="dl_btn" data-toggle="modal" data-target="#sponsorProvokeModel") 挑战
            button(class="dl_btn" onclick="{location.href='/arena/home'}") 擂台
block panel
  div(ng-app="tabViewGroup" ng-init="teamId='#{teamId}';groupId='#{gid}'")
    ul.nav.nav-tabs
      if(role !=='GUESTHR' && role !=='GUEST')
        li(ng-class="{'active':nowTab=='group_message'}")
          a.h5(href="#/group_message" ng-click="addactive('group_message')") 小组动态
        li(ng-class="{'active':nowTab=='group_campaign'}")
          a.h5(href="#/group_campaign" ng-click="addactive('group_campaign')") 小组活动
      li(ng-class="{'active':nowTab=='group_member'}")
        a.h5(href="#/group_member" ng-click="addactive('group_member')") 小组成员
      li(ng-class="{'active':nowTab=='group_info'}")
        a.h5(href="#/group_info" ng-click="addactive('group_info')") 小组资料
      li(ng-class="{'active':nowTab=='timeLine'}")
        a.h5(href="#/timeLine" ng-click="addactive('timeLine')") timeLine
    .tab-content
      .tab-pane.active
        div(ng-view)
    if(role ==='HR' || role ==='LEADER')
      //-这里如果不绑定控制器就无法运行了
      div(ng-controller="CampaignListController" class="modal fade" id="sponsorCampaignModel" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true")
        include ../partials/campaign_modal
      //-这里如果不绑定控制器就无法运行了
      div(ng-controller="CampaignListController" class="modal fade" id="sponsorProvokeModel" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true")
        include ../partials/provoke_modal
block aside

  if(role !=='GUESTHR' && role !=='HR')
    include ../partials/group_thumbnail
    +group_thumbnail(selected_teams,'active',role!=='HR'?'我的兴趣小组':'公司的兴趣小组')
    +group_thumbnail(unselected_teams,'inactive','未添加兴趣小组')
  if(role !=='GUESTHR' && role !=='GUEST')
    h4 小组相册
    if(role==='LEADER')
      a.h5(href="/group/#{group_id}/managePhotoAlbum") 管理相册
    each photo_album in photo_albums
      p
        img(src="/photoAlbum/#{photo_album.id}/preview")
        a.h5(href="/group/#{group_id}/photoAlbum/#{photo_album.id}")= photo_album.name

append footExt
  script(src="/lib/angular-route/angular-route.min.js")
  script(src="/js/controllers/tabviewGroup.js")
